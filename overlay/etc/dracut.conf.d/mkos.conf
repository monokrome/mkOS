# mkOS dracut configuration

# Build for this host only
hostonly="yes"
hostonly_cmdline="no"

# Essential modules for LUKS2 + btrfs boot
add_dracutmodules+=" crypt dm btrfs rootfs-block "

# Include crypttab
install_items+=" /etc/crypttab "

# Build as UKI
uefi="yes"
uefi_stub="/usr/lib/systemd/boot/efi/linuxx64.efi.stub"

# Kernel command line (placeholder - set during install)
# kernel_cmdline="rd.luks.uuid=<UUID> root=/dev/mapper/cryptroot rootflags=subvol=@ ro quiet"

# Use zstd compression
compress="zstd"

# Early KMS for plymouth
add_drivers+=" i915 amdgpu nouveau "
